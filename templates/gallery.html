{% extends "base.html" %}

{% block content %}
<div class="gallery-container">
    <h2>Photo Gallery</h2>
    
    {% if photos.items %}
        <div class="photos-grid">
            {% for photo in photos.items %}
                <div class="photo-card">
                    <img src="{{ url_for('static', filename='uploads/' + photo.filename) }}" 
                         alt="{{ photo.original_filename }}"
                         class="photo-thumbnail">
                    <div class="photo-info">
                        <h4>{{ photo.original_filename }}</h4>
                        <p>Uploaded: {{ photo.upload_date.strftime('%Y-%m-%d %H:%M') }}</p>
                        <p>Size: {{ (photo.file_size / 1024)|round(2) }} KB</p>
                        
                        <div class="photo-actions">
                            <a href="{{ url_for('static', filename='uploads/' + photo.filename) }}" 
                               target="_blank" class="btn btn-sm btn-primary">View</a>
                            <form action="{{ url_for('delete_photo', photo_id=photo.id) }}" 
                                  method="POST" class="delete-form">
                                <button type="submit" class="btn btn-sm btn-danger" 
                                        onclick="return confirm('Are you sure you want to delete this photo?')">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        <div class="pagination">
            {% if photos.has_prev %}
                <a href="{{ url_for('gallery', page=photos.prev_num) }}" class="btn">Previous</a>
            {% endif %}
            
            <span class="page-info">Page {{ photos.page }} of {{ photos.pages }}</span>
            
            {% if photos.has_next %}
                <a href="{{ url_for('gallery', page=photos.next_num) }}" class="btn">Next</a>
            {% endif %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>No photos uploaded yet.</p>
            <a href="{{ url_for('upload_photo') }}" class="btn btn-primary">Upload Your First Photo</a>
        </div>
    {% endif %}
</div>
{% endblock %}

